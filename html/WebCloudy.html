<html>
<head>
	<title>Web cloudy </title>
	<style type="text/css">
		BODY
		{
			margin: 0;
			font-family: Monospace;
			/*background-color: #44aaff;*/
			margin: 0px;
			overflow: hidden;
		}
		canvas
		{
			width: 	100%;
			height: 100%;
		}
	</style>
</head>
<body>
	<script src="../build/three.js"></script>
	<script src="../js/loaders/ColladaLoader.js"></script>
	<script src="../js/CloudyScene.js"></script>
	<!-- <script src="../js/CloudyControls.js"></script> -->
	<script src="../js/CloudyCameraControls.js"></script>
	<script src="../js/CloudyKeyControls.js"></script>
	<script>
		
		var scene = new THREE.Scene();
		camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 1000 );
		//renderer = new THREE.WebGLRenderer({alpha: true});
		renderer = new THREE.WebGLRenderer();
		renderer.setSize( window.innerWidth, window.innerHeight );
		
		document.body.appendChild( renderer.domElement );

		var cs = new CloudyScene(scene,"../models/out00.dae");
		cs.init();		
		
		var geometry = new THREE.BoxGeometry(1,1,1);
		var material = new THREE.MeshBasicMaterial({color:0x00ff00});
		var cube = new THREE.Mesh(geometry, material);
		scene.add(cube);
		
		camera.position.z = 15
		cloydycamera = new THREE.CloudyCameraControls(camera, null);
		controls = new THREE.CloudyKeyControls(cloydycamera, cs);
		
		renderer.setClearColor( 0x44aaff, 1);		
		
		var onWindowResize = function() {
			camera.aspect = window.innerWidth / window.innerHeight;
			camera.updateProjectionMatrix();
			renderer.setSize(window.innerWidth, window.innerHeight);
		}
		
		window.addEventListener('resize', onWindowResize, false);
		
		var clock = new THREE.Clock();
		
		var render = function() {
			setTimeout(function () {
				requestAnimationFrame(render);
			}, 50);

			//controls.update(clock.getDelta());
			delta = clock.getDelta()
			cloydycamera.update(delta);
			cs.update(delta);
			//requestAnimationFrame(render);
			cube.rotation.x += 0.1;
			cube.rotation.y += 0.1;
			renderer.render(scene, camera);
		}
		
		render();
	</script>

</body>
</html>